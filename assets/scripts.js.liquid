// Barba SAP Init
barba.init({
  preventRunning: true,
  transitions: [{
      name: 'default-transition',
      once(data) {
          console.log('once', data.next.namespace);
          gsap.to(data.next.container, 0.65, {
              opacity: 1,
              ease: "power2.inOut"
          });
      },
      leave(data) {
          // Remove active nav class
          document.querySelectorAll('.site-navigation a').forEach(function(element) {
              element.classList.remove('active');
          });
          // Animate out old view
          gsap.to(data.current.container, 0.45, {
              opacity: 0,
              ease: "power2.inOut"
          });
      },
      enter(data) {
          // console.log('enter', data.next.url.path);

          // Add active nav class
          document.querySelectorAll('.site-navigation a').forEach(function(element) {
            if (element.getAttribute('href') === data.next.url.path) {
              element.classList.add('active');
            }
          });

          // Fade in new content
          let page = data.next.namespace;
          
          gsap.set(data.next.container, {
              opacity: 0,
          });

          gsap.to(data.next.container, 0.45, {
              opacity: 1,
              ease: "power2.inOut"
          });
      },
  }],
  views: [{
      namespace: 'pagecontact',
      beforeEnter() {
        initContactPage();
      }
  },
  {
      namespace: 'collection',
      beforeEnter() {
        initCollectionPage();
      }
  },
  {
      namespace: 'product',
      beforeEnter() {
        initSingleProduct();
      }
  },
  {
      namespace: 'cart',
      beforeEnter() {
        initCartPage();
      }
  }]
});